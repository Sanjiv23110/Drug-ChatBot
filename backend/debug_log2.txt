[INFO] 2026-01-29 18:48:17,513 [RapidOCR] base.py:22: Using engine_name: torch
[INFO] 2026-01-29 18:48:17,522 [RapidOCR] device_config.py:50: Using CPU device
[INFO] 2026-01-29 18:48:17,535 [RapidOCR] download_file.py:60: File exists and is valid: C:\G\Maclens chatbot w api\backend\venv\Lib\site-packages\rapidocr\models\ch_PP-OCRv4_det_infer.pth
[INFO] 2026-01-29 18:48:17,535 [RapidOCR] main.py:50: Using C:\G\Maclens chatbot w api\backend\venv\Lib\site-packages\rapidocr\models\ch_PP-OCRv4_det_infer.pth
[INFO] 2026-01-29 18:48:17,684 [RapidOCR] base.py:22: Using engine_name: torch
[INFO] 2026-01-29 18:48:17,684 [RapidOCR] device_config.py:50: Using CPU device
[INFO] 2026-01-29 18:48:17,686 [RapidOCR] download_file.py:60: File exists and is valid: C:\G\Maclens chatbot w api\backend\venv\Lib\site-packages\rapidocr\models\ch_ptocr_mobile_v2.0_cls_infer.pth
[INFO] 2026-01-29 18:48:17,686 [RapidOCR] main.py:50: Using C:\G\Maclens chatbot w api\backend\venv\Lib\site-packages\rapidocr\models\ch_ptocr_mobile_v2.0_cls_infer.pth
[INFO] 2026-01-29 18:48:17,729 [RapidOCR] base.py:22: Using engine_name: torch
[INFO] 2026-01-29 18:48:17,729 [RapidOCR] device_config.py:50: Using CPU device
[INFO] 2026-01-29 18:48:17,750 [RapidOCR] download_file.py:60: File exists and is valid: C:\G\Maclens chatbot w api\backend\venv\Lib\site-packages\rapidocr\models\ch_PP-OCRv4_rec_infer.pth
[INFO] 2026-01-29 18:48:17,750 [RapidOCR] main.py:50: Using C:\G\Maclens chatbot w api\backend\venv\Lib\site-packages\rapidocr\models\ch_PP-OCRv4_rec_infer.pth
Parameter `strict_text` has been deprecated and will be ignored.
Database session error: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.UniqueViolationError'>: duplicate key value violates unique constraint "ix_section_mappings_original_header"
DETAIL:  Key (original_header)=(pediatrics) already exists.
[SQL: INSERT INTO section_mappings (original_header, normalized_name, display_name, suggested_by, confidence, is_common, usage_count, created_at, updated_at, section_group) SELECT p0::VARCHAR, p1::VARCHAR, p2::VARCHAR, p3::VARCHAR, p4::FLOAT, p5::BOOLEAN,  ... 12252 characters truncated ... 8, p9, sen_counter) ORDER BY sen_counter RETURNING section_mappings.id, section_mappings.id AS id__1]
[parameters: ('pr axid', 'pr_axid', 'Pr Axid', 'auto', 0.8, False, 1, datetime.datetime(2026, 1, 29, 13, 19, 8, 529953), datetime.datetime(2026, 1, 29, 13, 19, 8, 529953), None, 'table of contents', 'table_of_contents', 'Table Of Contents', 'auto', 0.8, False, 1, datetime.datetime(2026, 1, 29, 13, 19, 8, 531835), datetime.datetime(2026, 1, 29, 13, 19, 8, 531835), None, 'indications', 'indications', 'Indications', 'auto', 0.8, False, 1, datetime.datetime(2026, 1, 29, 13, 19, 8, 533273), datetime.datetime(2026, 1, 29, 13, 19, 8, 533273), None, 'pediatrics', 'pediatrics', 'Pediatrics', 'auto', 0.8, False, 1, datetime.datetime(2026, 1, 29, 13, 19, 8, 534748), datetime.datetime(2026, 1, 29, 13, 19, 8, 534748), None, 'geriatrics', 'geriatrics', 'Geriatrics', 'auto', 0.8, False, 1, datetime.datetime(2026, 1, 29, 13, 19, 8, 536935), datetime.datetime(2026, 1, 29, 13, 19, 8, 536935), None ... 530 parameters truncated ... 'missed dose', 'missed_dose', 'Missed Dose', 'auto', 0.8, False, 1, datetime.datetime(2026, 1, 29, 13, 19, 8, 614153), datetime.datetime(2026, 1, 29, 13, 19, 8, 614153), None, 'what are possible side effects from using axid', 'what_are_possible_side_effects_from_using_axid', 'What Are Possible Side Effects From Using Axid', 'auto', 0.8, False, 1, datetime.datetime(2026, 1, 29, 13, 19, 8, 616453), datetime.datetime(2026, 1, 29, 13, 19, 8, 616453), None, 'reporting side effects', 'reporting_side_effects', 'Reporting Side Effects', 'auto', 0.8, False, 1, datetime.datetime(2026, 1, 29, 13, 19, 8, 617681), datetime.datetime(2026, 1, 29, 13, 19, 8, 617681), None, 'storage', 'storage', 'Storage', 'auto', 0.8, False, 1, datetime.datetime(2026, 1, 29, 13, 19, 8, 618334), datetime.datetime(2026, 1, 29, 13, 19, 8, 618334), None, 'if you want more information about axid', 'if_you_want_more_information_about_axid', 'If You Want More Information About Axid', 'auto', 0.8, False, 1, datetime.datetime(2026, 1, 29, 13, 19, 8, 619366), datetime.datetime(2026, 1, 29, 13, 19, 8, 619366), None)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Ingestion failed for 00062205.pdf: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.UniqueViolationError'>: duplicate key value violates unique constraint "ix_section_mappings_original_header"
DETAIL:  Key (original_header)=(pediatrics) already exists.
[SQL: INSERT INTO section_mappings (original_header, normalized_name, display_name, suggested_by, confidence, is_common, usage_count, created_at, updated_at, section_group) SELECT p0::VARCHAR, p1::VARCHAR, p2::VARCHAR, p3::VARCHAR, p4::FLOAT, p5::BOOLEAN,  ... 12252 characters truncated ... 8, p9, sen_counter) ORDER BY sen_counter RETURNING section_mappings.id, section_mappings.id AS id__1]
[parameters: ('pr axid', 'pr_axid', 'Pr Axid', 'auto', 0.8, False, 1, datetime.datetime(2026, 1, 29, 13, 19, 8, 529953), datetime.datetime(2026, 1, 29, 13, 19, 8, 529953), None, 'table of contents', 'table_of_contents', 'Table Of Contents', 'auto', 0.8, False, 1, datetime.datetime(2026, 1, 29, 13, 19, 8, 531835), datetime.datetime(2026, 1, 29, 13, 19, 8, 531835), None, 'indications', 'indications', 'Indications', 'auto', 0.8, False, 1, datetime.datetime(2026, 1, 29, 13, 19, 8, 533273), datetime.datetime(2026, 1, 29, 13, 19, 8, 533273), None, 'pediatrics', 'pediatrics', 'Pediatrics', 'auto', 0.8, False, 1, datetime.datetime(2026, 1, 29, 13, 19, 8, 534748), datetime.datetime(2026, 1, 29, 13, 19, 8, 534748), None, 'geriatrics', 'geriatrics', 'Geriatrics', 'auto', 0.8, False, 1, datetime.datetime(2026, 1, 29, 13, 19, 8, 536935), datetime.datetime(2026, 1, 29, 13, 19, 8, 536935), None ... 530 parameters truncated ... 'missed dose', 'missed_dose', 'Missed Dose', 'auto', 0.8, False, 1, datetime.datetime(2026, 1, 29, 13, 19, 8, 614153), datetime.datetime(2026, 1, 29, 13, 19, 8, 614153), None, 'what are possible side effects from using axid', 'what_are_possible_side_effects_from_using_axid', 'What Are Possible Side Effects From Using Axid', 'auto', 0.8, False, 1, datetime.datetime(2026, 1, 29, 13, 19, 8, 616453), datetime.datetime(2026, 1, 29, 13, 19, 8, 616453), None, 'reporting side effects', 'reporting_side_effects', 'Reporting Side Effects', 'auto', 0.8, False, 1, datetime.datetime(2026, 1, 29, 13, 19, 8, 617681), datetime.datetime(2026, 1, 29, 13, 19, 8, 617681), None, 'storage', 'storage', 'Storage', 'auto', 0.8, False, 1, datetime.datetime(2026, 1, 29, 13, 19, 8, 618334), datetime.datetime(2026, 1, 29, 13, 19, 8, 618334), None, 'if you want more information about axid', 'if_you_want_more_information_about_axid', 'If You Want More Information About Axid', 'auto', 0.8, False, 1, datetime.datetime(2026, 1, 29, 13, 19, 8, 619366), datetime.datetime(2026, 1, 29, 13, 19, 8, 619366), None)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Success: False
Drug: 
Sections: 0
Error: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.UniqueViolationError'>: duplicate key value violates unique constraint "ix_section_mappings_original_header"
DETAIL:  Key (original_header)=(pediatrics) already exists.
[SQL: INSERT INTO section_mappings (original_header, normalized_name, display_name, suggested_by, confidence, is_common, usage_count, created_at, updated_at, section_group) SELECT p0::VARCHAR, p1::VARCHAR, p2::VARCHAR, p3::VARCHAR, p4::FLOAT, p5::BOOLEAN,  ... 12252 characters truncated ... 8, p9, sen_counter) ORDER BY sen_counter RETURNING section_mappings.id, section_mappings.id AS id__1]
[parameters: ('pr axid', 'pr_axid', 'Pr Axid', 'auto', 0.8, False, 1, datetime.datetime(2026, 1, 29, 13, 19, 8, 529953), datetime.datetime(2026, 1, 29, 13, 19, 8, 529953), None, 'table of contents', 'table_of_contents', 'Table Of Contents', 'auto', 0.8, False, 1, datetime.datetime(2026, 1, 29, 13, 19, 8, 531835), datetime.datetime(2026, 1, 29, 13, 19, 8, 531835), None, 'indications', 'indications', 'Indications', 'auto', 0.8, False, 1, datetime.datetime(2026, 1, 29, 13, 19, 8, 533273), datetime.datetime(2026, 1, 29, 13, 19, 8, 533273), None, 'pediatrics', 'pediatrics', 'Pediatrics', 'auto', 0.8, False, 1, datetime.datetime(2026, 1, 29, 13, 19, 8, 534748), datetime.datetime(2026, 1, 29, 13, 19, 8, 534748), None, 'geriatrics', 'geriatrics', 'Geriatrics', 'auto', 0.8, False, 1, datetime.datetime(2026, 1, 29, 13, 19, 8, 536935), datetime.datetime(2026, 1, 29, 13, 19, 8, 536935), None ... 530 parameters truncated ... 'missed dose', 'missed_dose', 'Missed Dose', 'auto', 0.8, False, 1, datetime.datetime(2026, 1, 29, 13, 19, 8, 614153), datetime.datetime(2026, 1, 29, 13, 19, 8, 614153), None, 'what are possible side effects from using axid', 'what_are_possible_side_effects_from_using_axid', 'What Are Possible Side Effects From Using Axid', 'auto', 0.8, False, 1, datetime.datetime(2026, 1, 29, 13, 19, 8, 616453), datetime.datetime(2026, 1, 29, 13, 19, 8, 616453), None, 'reporting side effects', 'reporting_side_effects', 'Reporting Side Effects', 'auto', 0.8, False, 1, datetime.datetime(2026, 1, 29, 13, 19, 8, 617681), datetime.datetime(2026, 1, 29, 13, 19, 8, 617681), None, 'storage', 'storage', 'Storage', 'auto', 0.8, False, 1, datetime.datetime(2026, 1, 29, 13, 19, 8, 618334), datetime.datetime(2026, 1, 29, 13, 19, 8, 618334), None, 'if you want more information about axid', 'if_you_want_more_information_about_axid', 'If You Want More Information About Axid', 'auto', 0.8, False, 1, datetime.datetime(2026, 1, 29, 13, 19, 8, 619366), datetime.datetime(2026, 1, 29, 13, 19, 8, 619366), None)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
